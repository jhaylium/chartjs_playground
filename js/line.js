let data = {
    "status": 0,
    "sentiment_total": {
        "pct_neutral": 0.617,
        "pct_negative": 0.114,
        "pct_positive": 0.261
    },
    "sentiment_fields": [
        {
            "key": "q40_sentiment",
            "pct_neutral": 0.856,
            "pct_negative": 0.036,
            "pct_positive": 0.106
        },
        {
            "key": "q35_sentiment",
            "pct_neutral": 0.451,
            "pct_negative": 0.013,
            "pct_positive": 0.532
        },
        {
            "key": "q41_sentiment",
            "pct_neutral": 0.61,
            "pct_negative": 0.182,
            "pct_positive": 0.202
        },
        {
            "key": "q36_sentiment",
            "pct_neutral": 0.541,
            "pct_negative": 0.186,
            "pct_positive": 0.254
        },
        {
            "key": "q39_sentiment",
            "pct_neutral": 0.665,
            "pct_negative": 0.154,
            "pct_positive": 0.173
        }
    ],
    "trend_fields": [
        {
            "key": "q40_sentiment",
            "startdate": "2019-11-22",
            "pct_neutral": 0.906,
            "pct_negative": 0.019,
            "pct_positive": 0.075,
            "num_responses": 82
        },
        {
            "key": "q40_sentiment",
            "startdate": "2019-11-21",
            "pct_neutral": 0.879,
            "pct_negative": 0.03,
            "pct_positive": 0.091,
            "num_responses": 54
        },
        {
            "key": "q35_sentiment",
            "startdate": "2019-11-21",
            "pct_neutral": 0.444,
            "pct_negative": 0.0,
            "pct_positive": 0.556,
            "num_responses": 54
        },
        {
            "key": "q39_sentiment",
            "startdate": "2019-11-18",
            "pct_neutral": 0.673,
            "pct_negative": 0.145,
            "pct_positive": 0.173,
            "num_responses": 261
        },
        {
            "key": "q39_sentiment",
            "startdate": "2019-11-19",
            "pct_neutral": 0.63,
            "pct_negative": 0.152,
            "pct_positive": 0.217,
            "num_responses": 112
        },
        {
            "key": "q40_sentiment",
            "startdate": "2019-11-17",
            "pct_neutral": 0.667,
            "pct_negative": 0.042,
            "pct_positive": 0.292,
            "num_responses": 37
        },
        {
            "key": "q41_sentiment",
            "startdate": "2019-11-24",
            "pct_neutral": 0.605,
            "pct_negative": 0.237,
            "pct_positive": 0.158,
            "num_responses": 56
        },
        {
            "key": "q41_sentiment",
            "startdate": "2019-11-17",
            "pct_neutral": 0.714,
            "pct_negative": 0.25,
            "pct_positive": 0.036,
            "num_responses": 37
        },
        {
            "key": "q39_sentiment",
            "startdate": "2019-11-25",
            "pct_neutral": 0.61,
            "pct_negative": 0.146,
            "pct_positive": 0.22,
            "num_responses": 43
        },
        {
            "key": "q41_sentiment",
            "startdate": "2019-11-25",
            "pct_neutral": 0.472,
            "pct_negative": 0.25,
            "pct_positive": 0.278,
            "num_responses": 43
        },
        {
            "key": "q41_sentiment",
            "startdate": "2019-11-19",
            "pct_neutral": 0.663,
            "pct_negative": 0.186,
            "pct_positive": 0.14,
            "num_responses": 112
        },
        {
            "key": "q36_sentiment",
            "startdate": "2019-11-25",
            "pct_neutral": 0.357,
            "pct_negative": 0.143,
            "pct_positive": 0.429,
            "num_responses": 43
        },
        {
            "key": "q40_sentiment",
            "startdate": "2019-11-25",
            "pct_neutral": 0.871,
            "pct_negative": 0.032,
            "pct_positive": 0.097,
            "num_responses": 43
        },
        {
            "key": "q36_sentiment",
            "startdate": "2019-11-20",
            "pct_neutral": 0.618,
            "pct_negative": 0.118,
            "pct_positive": 0.255,
            "num_responses": 171
        },
        {
            "key": "q41_sentiment",
            "startdate": "2019-11-20",
            "pct_neutral": 0.637,
            "pct_negative": 0.17,
            "pct_positive": 0.185,
            "num_responses": 171
        },
        {
            "key": "q39_sentiment",
            "startdate": "2019-11-20",
            "pct_neutral": 0.671,
            "pct_negative": 0.154,
            "pct_positive": 0.168,
            "num_responses": 171
        },
        {
            "key": "q41_sentiment",
            "startdate": "2019-11-21",
            "pct_neutral": 0.698,
            "pct_negative": 0.116,
            "pct_positive": 0.163,
            "num_responses": 54
        },
        {
            "key": "q35_sentiment",
            "startdate": "2019-11-22",
            "pct_neutral": 0.426,
            "pct_negative": 0.015,
            "pct_positive": 0.559,
            "num_responses": 82
        },
        {
            "key": "q36_sentiment",
            "startdate": "2019-11-22",
            "pct_neutral": 0.571,
            "pct_negative": 0.179,
            "pct_positive": 0.214,
            "num_responses": 82
        },
        {
            "key": "q40_sentiment",
            "startdate": "2019-11-20",
            "pct_neutral": 0.839,
            "pct_negative": 0.027,
            "pct_positive": 0.134,
            "num_responses": 171
        },
        {
            "key": "q35_sentiment",
            "startdate": "2019-11-17",
            "pct_neutral": 0.536,
            "pct_negative": 0.036,
            "pct_positive": 0.429,
            "num_responses": 37
        },
        {
            "key": "q35_sentiment",
            "startdate": "2019-11-18",
            "pct_neutral": 0.465,
            "pct_negative": 0.019,
            "pct_positive": 0.512,
            "num_responses": 261
        },
        {
            "key": "q40_sentiment",
            "startdate": "2019-11-23",
            "pct_neutral": null,
            "pct_negative": null,
            "pct_positive": null,
            "num_responses": 4
        },
        {
            "key": "q39_sentiment",
            "startdate": "2019-11-24",
            "pct_neutral": 0.822,
            "pct_negative": 0.067,
            "pct_positive": 0.111,
            "num_responses": 56
        },
        {
            "key": "q41_sentiment",
            "startdate": "2019-11-22",
            "pct_neutral": 0.615,
            "pct_negative": 0.154,
            "pct_positive": 0.231,
            "num_responses": 82
        },
        {
            "key": "q36_sentiment",
            "startdate": "2019-11-24",
            "pct_neutral": 0.457,
            "pct_negative": 0.229,
            "pct_positive": 0.286,
            "num_responses": 56
        },
        {
            "key": "q39_sentiment",
            "startdate": "2019-11-17",
            "pct_neutral": 0.656,
            "pct_negative": 0.219,
            "pct_positive": 0.094,
            "num_responses": 37
        },
        {
            "key": "q35_sentiment",
            "startdate": "2019-11-25",
            "pct_neutral": 0.486,
            "pct_negative": 0.0,
            "pct_positive": 0.514,
            "num_responses": 43
        },
        {
            "key": "q36_sentiment",
            "startdate": "2019-11-21",
            "pct_neutral": 0.559,
            "pct_negative": 0.176,
            "pct_positive": 0.235,
            "num_responses": 54
        },
        {
            "key": "q36_sentiment",
            "startdate": "2019-11-19",
            "pct_neutral": 0.676,
            "pct_negative": 0.095,
            "pct_positive": 0.23,
            "num_responses": 112
        },
        {
            "key": "q40_sentiment",
            "startdate": "2019-11-18",
            "pct_neutral": 0.877,
            "pct_negative": 0.037,
            "pct_positive": 0.086,
            "num_responses": 261
        },
        {
            "key": "q39_sentiment",
            "startdate": "2019-11-21",
            "pct_neutral": 0.689,
            "pct_negative": 0.133,
            "pct_positive": 0.178,
            "num_responses": 54
        },
        {
            "key": "q36_sentiment",
            "startdate": "2019-11-23",
            "pct_neutral": 1.0,
            "pct_negative": 0.0,
            "pct_positive": 0.0,
            "num_responses": 4
        },
        {
            "key": "q36_sentiment",
            "startdate": "2019-11-18",
            "pct_neutral": 0.462,
            "pct_negative": 0.266,
            "pct_positive": 0.254,
            "num_responses": 261
        },
        {
            "key": "q40_sentiment",
            "startdate": "2019-11-19",
            "pct_neutral": 0.919,
            "pct_negative": 0.054,
            "pct_positive": 0.027,
            "num_responses": 112
        },
        {
            "key": "q40_sentiment",
            "startdate": "2019-11-24",
            "pct_neutral": 0.677,
            "pct_negative": 0.065,
            "pct_positive": 0.226,
            "num_responses": 56
        },
        {
            "key": "q39_sentiment",
            "startdate": "2019-11-22",
            "pct_neutral": 0.588,
            "pct_negative": 0.235,
            "pct_positive": 0.176,
            "num_responses": 82
        },
        {
            "key": "q41_sentiment",
            "startdate": "2019-11-23",
            "pct_neutral": 1.0,
            "pct_negative": 0.0,
            "pct_positive": 0.0,
            "num_responses": 4
        },
        {
            "key": "q36_sentiment",
            "startdate": "2019-11-17",
            "pct_neutral": 0.556,
            "pct_negative": 0.222,
            "pct_positive": 0.222,
            "num_responses": 37
        },
        {
            "key": "q35_sentiment",
            "startdate": "2019-11-19",
            "pct_neutral": 0.44,
            "pct_negative": 0.0,
            "pct_positive": 0.549,
            "num_responses": 112
        },
        {
            "key": "q41_sentiment",
            "startdate": "2019-11-18",
            "pct_neutral": 0.558,
            "pct_negative": 0.18,
            "pct_positive": 0.257,
            "num_responses": 261
        },
        {
            "key": "q35_sentiment",
            "startdate": "2019-11-23",
            "pct_neutral": 0.5,
            "pct_negative": 0.0,
            "pct_positive": 0.5,
            "num_responses": 4
        },
        {
            "key": "q35_sentiment",
            "startdate": "2019-11-20",
            "pct_neutral": 0.408,
            "pct_negative": 0.007,
            "pct_positive": 0.585,
            "num_responses": 171
        },
        {
            "key": "q39_sentiment",
            "startdate": "2019-11-23",
            "pct_neutral": 1.0,
            "pct_negative": 0.0,
            "pct_positive": 0.0,
            "num_responses": 4
        },
        {
            "key": "q35_sentiment",
            "startdate": "2019-11-24",
            "pct_neutral": 0.511,
            "pct_negative": 0.043,
            "pct_positive": 0.447,
            "num_responses": 56
        }
    ],
    "trend_total": [
        {
            "startdate": "2019-11-21",
            "pct_neutral": 0.645,
            "pct_negative": 0.09,
            "pct_positive": 0.255,
            "num_responses": 270
        },
        {
            "startdate": "2019-11-19",
            "pct_neutral": 0.655,
            "pct_negative": 0.098,
            "pct_positive": 0.242,
            "num_responses": 560
        },
        {
            "startdate": "2019-11-24",
            "pct_neutral": 0.617,
            "pct_negative": 0.122,
            "pct_positive": 0.25,
            "num_responses": 280
        },
        {
            "startdate": "2019-11-22",
            "pct_neutral": 0.61,
            "pct_negative": 0.123,
            "pct_positive": 0.261,
            "num_responses": 410
        },
        {
            "startdate": "2019-11-25",
            "pct_neutral": 0.561,
            "pct_negative": 0.116,
            "pct_positive": 0.306,
            "num_responses": 215
        },
        {
            "startdate": "2019-11-17",
            "pct_neutral": 0.626,
            "pct_negative": 0.158,
            "pct_positive": 0.209,
            "num_responses": 185
        },
        {
            "startdate": "2019-11-20",
            "pct_neutral": 0.625,
            "pct_negative": 0.096,
            "pct_positive": 0.274,
            "num_responses": 855
        },
        {
            "startdate": "2019-11-23",
            "pct_neutral": 0.857,
            "pct_negative": 0.0,
            "pct_positive": 0.143,
            "num_responses": 20
        },
        {
            "startdate": "2019-11-18",
            "pct_neutral": 0.6,
            "pct_negative": 0.128,
            "pct_positive": 0.265,
            "num_responses": 1305
        }
    ]
}

console.log(get_trend_labels(data['trend_total']));
draw_trend();


function draw_trend(){
    let ctx = document.getElementById("chart")
    let chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: get_trend_labels(data['trend_total']),
            datasets: get_datasets(data['trend_total'])
        },
        options: {fill: false}
    })

}

function get_trend_labels(d){
    label_array = new Array;
    for (i=0; i< d.length; i++){
        label_array.push(d[i].startdate)
    }
    return label_array
}

function get_datasets(data){
    let data_array = new Array;
    let positive_object = {label: 'Positive', fill:false, borderColor: '#1f8e3f', backgroundColor: '#1f8e3f'}
    // rgba(31, 142, 63, 1)
    let neutral_object = {label: 'Neutral',   fill:false,borderColor: '#c3c3bb', backgroundColor:'#c3c3bb'}
    // rgba(195, 195, 187, 1)
    let negative_object = {label: 'Negative',   fill:false,borderColor: '#fa3333', backgroundColor: '#fa3333'}
    //  rgba(250, 51, 51, 1)
    let positive_array = new Array;
    let neutral_array = new Array;
    let negative_array = new Array;
    for (i = 0; i< data.length; i++){
        console.log(data[i])
        positive_array.push(data[i].pct_positive);
        neutral_array.push(data[i].pct_neutral);
        negative_array.push(data[i].pct_negative)
    }
    positive_object["data"] =  positive_array;
    neutral_object["data"] =  neutral_array;
    negative_object["data"] =  negative_array;
    console.log(positive_object)

    data_array.push(positive_object, neutral_object, negative_object)
    return data_array
}